var DataBind=function(e){"use strict";return e.Binder=function(e,t){function a(e){var t=r.querySelectorAll('[data-foreach$="in '+e+'"]');g(t,e),i(t);var a=r.querySelectorAll('[data-bind="'+e+'"]');A(a);var n=r.querySelectorAll('[data-class="'+e+'"]');o(n);var l=r.querySelectorAll('[data-class^="'+e+'("]');o(l)}var n=t||window.document,r=n.querySelector("[data-scope="+e.scope+"]"),l={},c={};e.setValueChanged(a);var i=function(e){for(var t=0;t<e.length;t++){var a=e[t].querySelectorAll("[data-bind]");A(a);var n=e[t].querySelectorAll("[data-class]");o(n);var l=e[t].querySelectorAll("[data-click]");h(l);var c=r.querySelectorAll("[data-enter]");s(c)}},o=function(e){for(var t=0;t<e.length;t++)u(e[t])},u=function(t){var a=t.getAttribute("data-class"),n=l[a];n&&t.classList.remove(n);var r=e.get(a);l[a]=r,r&&t.classList.add(r)},d=function(){var e=r.querySelectorAll("[data-foreach]");p(e),g(e);var t=r.querySelectorAll("[data-bind]");A(t);var a=r.querySelectorAll("[data-class]");o(a);var n=r.querySelectorAll("[data-click]");h(n);var l=r.querySelectorAll("[data-enter]");s(l)},s=function(e){for(var t=0;t<e.length;t++)f(e[t])},f=function(t){var a=t.getAttribute("data-enter");t.onkeydown=function(t){13===t.which&&e.get(a)}},h=function(e){for(var t=0;t<e.length;t++)y(e[t])},p=function(e){for(var t=0;t<e.length;t++){for(var a=[],n=0;n<e[t].children.length;n++)a.push(e[t].children[n].cloneNode(!0));var r=e[t].getAttribute("data-foreach"),l=r.split("in");c[e[t].id]={template:a,items:l[1].trim(),item:l[0].trim()}}},g=function(t){for(var a=0;a<t.length;a++){v(t[a]);for(var n=c[t[a].id],r=e.get(n.items),l=0;l<r.length();l++)for(var i=0;i<n.template.length;i++){var o=n.template[i].cloneNode(!0);t[a].appendChild(o),m(o,"data-bind",n,l),m(o,"data-class",n,l)}}},v=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},m=function(e,t,a,n){var r=function(e){return e.replace(a.item,a.items+"["+n+"]")};if(e.hasAttribute(t)){var l=e.getAttribute(t).replace(new RegExp("^"+a.item+"(?=[.]|$)"),a.items+"["+n+"]").replace(new RegExp("[(,] *"+a.item+" *(?=[,)])","g"),r);e.setAttribute(t,l)}for(var c=0;c<e.children.length;c++)m(e.children[c],t,a,n)},y=function(t){var a=t.getAttribute("data-click");t.onclick=function(){e.get(a)}},A=function(e){for(var t=0;t<e.length;t++)C(e[t])},C=function(t){var a=t.getAttribute("data-bind"),n=e.get(a);void 0===n?e.attr(a,""):"checkbox"===t.type?(t.checked=n,t.onclick=function(){e.attr(a,t.checked)}):"radio"===t.type?(t.checked=n===t.value,t.onclick=function(){e.attr(a,t.value)}):"select"===t.tagName.toLowerCase()?(t.value=n,t.onchange=function(){e.attr(a,t.value)}):"text"===t.type||"textarea"===t.type?(t.value!==n&&(t.value=n),t.oninput=function(){e.attr(a,t.value)}):t.innerHTML=n};return{bind:d}},e}(DataBind||{}),DataBind=function(dataBind){"use strict";return dataBind.Model=function(scope){var attrs={},dependsOn={},valueChanged=function(){},getArrayIndexerMatch=function(e){var t=/\[([^\]]+)\]/;return t.exec(e)},fireValueChangedForAll=function(e){e.forEach(function(e){fireValueChangedForAllDependencies(e)})},attr=function(name,value,object,fullName,changedCollections){fullName=fullName||name,changedCollections=changedCollections||[];var dotPieces=name.split("."),rest=dotPieces.slice(1,dotPieces.length).join("."),arrayIndexer=getArrayIndexerMatch(dotPieces[0]);if(null!==arrayIndexer){var prop=dotPieces[0].substring(0,arrayIndexer.index),index=getIndex(arrayIndexer[1]);changedCollections.push(prop),void 0!==object?attr(rest,value,eval("object."+prop)[index],fullName,changedCollections):1===dotPieces.length?(attrs[prop][index]=value,fireValueChangedForAllDependencies(fullName),fireValueChangedForAll(changedCollections)):attr(rest,value,attrs[prop][index],fullName,changedCollections)}else void 0!==object?1===dotPieces.length?(object[dotPieces[0]]=value,fireValueChangedForAllDependencies(fullName),fireValueChangedForAll(changedCollections)):attr(rest,value,eval("object."+dotPieces[0]),fullName):1===dotPieces.length?(attrs[name]=value,fireValueChangedForAllDependencies(name)):(void 0===attrs[dotPieces[0]]&&(attrs[dotPieces[0]]={}),attr(rest,value,attrs[dotPieces[0]],fullName))},parseFunctionCall=function(e){var t=[],a=e,n=/[(][^)]*[)]/,r=n.exec(e);if(null!==r){a=e.substring(0,r.index);var l=r[0].replace("(","").replace(")",""),c=l.length>0?l.split(","):[];c.forEach(function(e){t.push(get.call(this,e.trim()))})}return{name:a,args:t,isMatch:null!==r}},get=function(name,object,fullName){if(fullName=fullName||name,/^\d+$/.test(name))return parseInt(name);var dotPieces=name.split("."),rest=dotPieces.slice(1,dotPieces.length).join("."),parseFuncResult=parseFunctionCall(dotPieces[0]);if(!parseFuncResult.isMatch){var arrayIndexer=getArrayIndexerMatch(dotPieces[0]);if(null!==arrayIndexer){var prop=dotPieces[0].substring(0,arrayIndexer.index),index=getIndex(arrayIndexer[1]);return void 0!==object?get.call(this,rest,eval("object."+prop)[index],fullName):get.call(this,rest,attrs[prop][index],fullName)}}if(void 0!==object)return""===dotPieces[0]?checkWrapArray(fullName,object):get.call(this,rest,eval("object."+dotPieces[0]),fullName);if(1===dotPieces.length)return"function"==typeof attrs[parseFuncResult.name]?attrs[parseFuncResult.name].apply(this,parseFuncResult.args):checkWrapArray(name,attrs[name]);var thisObject="function"==typeof attrs[parseFuncResult.name]?attrs[parseFuncResult.name].apply(this,parseFuncResult.args):attrs[dotPieces[0]];return get.call(this,rest,thisObject,fullName)},checkWrapArray=function(e,t){return Array.isArray(t)?new DataBind.Collection(e,t,fireValueChangedForAllDependencies):t},fireValueChangedForAllDependencies=function(e){valueChanged(e),dependsOn.hasOwnProperty(e)&&dependsOn[e].forEach(function(e){fireValueChangedForAllDependencies(e)})},computed=function(e,t,a){a&&a.forEach(function(t){addDependency(e,t)});for(var n=/this\.get\(['"]([^'"]+)['"]\)/g,r=n.exec(t.toString());null!=r;)addDependency(e,r[1]),r=n.exec(t.toString());attrs[e]=t},action=function(e,t){attrs[e]=t},addDependency=function(e,t){dependsOn[t]=dependsOn[t]||[],dependsOn[t].push(e)},setValueChanged=function(e){valueChanged=e},getIndex=function(e){var t=/^\d+$/;return t.test(e)?parseInt(e):attrs[e]};return{attr:attr,get:get,computed:computed,action:action,scope:scope,setValueChanged:setValueChanged}},dataBind}(DataBind||{}),DataBind=function(e){"use strict";return e.Collection=function(e,t,a){var n=function(n){t.push(n),a(e)},r=function(){t.pop(),a(e)},l=function(n){t.forEach(function(e){n(e)}),a(e)},c=function(){t.length=0,a(e)};return{push:n,pop:r,value:t,length:function(){return t.length},forEach:l,clear:c}},e}(DataBind||{});