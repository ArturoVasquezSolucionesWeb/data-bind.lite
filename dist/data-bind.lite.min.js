var DataBind=function(t){"use strict";return t.Binder=function(t,e){function n(t){var e=i.querySelectorAll('[data-foreach$="in '+t+'"]');p(e,t),l(e);var n=i.querySelectorAll('[data-bind="'+t+'"]');b(n);var r=i.querySelectorAll('[data-class="'+t+'"]');u(r);var a=i.querySelectorAll('[data-class^="'+t+'("]');u(a)}function r(t,e){for(var n=[].slice.call(t),r=0;r<n.length;r++)for(var a=0;a<e.length;a++)n[r]===e[a]&&n.splice(r,1);return n}var a=e||window.document,i=a.querySelector("[data-scope="+t.scope+"]"),c={},o={};t.addValueChangedListener(n);var l=function(t){for(var e=0;e<t.length;e++){var n=t[e].querySelectorAll("[data-bind]");b(n);var r=t[e].querySelectorAll("[data-class]");u(r);var a=t[e].querySelectorAll("[data-click]");h(a);var c=i.querySelectorAll("[data-enter]");d(c)}},u=function(t){for(var e=0;e<t.length;e++)f(t[e])},f=function(e){var n=e.getAttribute("data-class"),r=c[n];r&&e.classList.remove(r);var a=t.get(n);c[n]=a,a&&e.classList.add(a)},s=function(){var t=i.querySelectorAll("[data-foreach]"),e=i.querySelectorAll("[data-foreach] [data-foreach]"),n=r(t,e);g(n),p(n);var a=i.querySelectorAll("[data-bind]");b(a);var c=i.querySelectorAll("[data-class]");u(c);var o=i.querySelectorAll("[data-click]");h(o);var l=i.querySelectorAll("[data-enter]");d(l)},d=function(t){for(var e=0;e<t.length;e++)v(t[e])},v=function(e){var n=e.getAttribute("data-enter");e.onkeydown=function(e){13===e.which&&t.invoke(n)}},h=function(t){for(var e=0;e<t.length;e++)A(t[e])},g=function(t){for(var e=0;e<t.length;e++){for(var n=[],r=0;r<t[e].children.length;r++)n.push(t[e].children[r].cloneNode(!0));var a=t[e].getAttribute("data-foreach"),i=a.split(" in ");o[a]={template:n,items:i[1].trim(),item:i[0].trim()}}},p=function(e){for(var n=0;n<e.length;n++){y(e[n]);for(var r=e[n].getAttribute("data-foreach"),a=o[r],i=t.get(a.items),c=0;c<i.length();c++)for(var l=0;l<a.template.length;l++){var u=a.template[l].cloneNode(!0);e[n].appendChild(u),m(u,"data-bind",a,c),m(u,"data-class",a,c),m(u,"data-click",a,c),m(u,"data-foreach",a,c)}}},y=function(t){for(;t.lastChild;)t.removeChild(t.lastChild)},m=function(t,e,n,r){var a=function(t){return t.replace(n.item,n.items+"["+r+"]")};if(t.hasAttribute(e)){var i=t.getAttribute(e),c=i.replace(new RegExp("^"+n.item+"(?=[.]|$)"),n.items+"["+r+"]").replace(new RegExp("[(,] *"+n.item+" *(?=[,)])","g"),a).replace(new RegExp(" in "+n.item+"$")," in "+n.items+"["+r+"]");t.setAttribute(e,c),"data-foreach"===e&&(g([t]),p([t]))}for(var o=0;o<t.children.length;o++)m(t.children[o],e,n,r)},A=function(e){var n=e.getAttribute("data-click");e.onclick=function(){t.invoke(n)}},b=function(t){for(var e=0;e<t.length;e++)S(t[e])},S=function(e){var n=e.getAttribute("data-bind"),r=t.get(n);void 0===r?t.attr(n,""):"checkbox"===e.type?(e.checked=r,e.onclick=function(){t.attr(n,e.checked)}):"radio"===e.type?(e.checked=r===e.value,e.onclick=function(){t.attr(n,e.value)}):"select"===e.tagName.toLowerCase()?(e.value=r,e.onchange=function(){t.attr(n,e.value)}):"text"===e.type||"textarea"===e.type?(e.value!==r&&(e.value=r),e.oninput=function(){t.attr(n,e.value)}):e.innerHTML=r};return{bind:s}},t}(DataBind||{}),DataBind=function(t){"use strict";return t.Model=function(t){function e(t){return a[t]}function n(t,e){a[t]=e}function r(t){c.forEach(function(e){e(t)}),i.hasOwnProperty(t)&&i[t].forEach(function(t){r(t)})}var a={},i={},c=[],o=new DataBind.Parser(r,e,n),l=function(t,e){o.attr(t,e)},u=function(t){return o.get(t)},f=function(t,e,n){n&&n.forEach(function(e){d(t,e)});for(var r=/this\.get\(['"]([^'"]+)['"]\)/g,i=r.exec(e.toString());null!=i;)d(t,i[1]),i=r.exec(e.toString());a[t]=e},s=function(t,e){a[t]=e},d=function(t,e){i[e]=i[e]||[],i[e].push(t)},v=function(t){c.push(t)};return{attr:l,get:u,computed:f,action:s,scope:t,addValueChangedListener:v,invoke:function(t){u(t)}}},t}(DataBind||{}),DataBind=function(t){"use strict";return t.Collection=function(t,e,n){var r=function(r){e.push(r),n(t)},a=function(){e.pop(),n(t)},i=function(r){e.forEach(function(t){r(t)}),n(t)},c=function(){e.length=0,n(t)};return{push:r,pop:a,value:e,length:function(){return e.length},forEach:i,clear:c}},t}(DataBind||{}),DataBind=function(t){"use strict";return t.Parser=function(t,e,n){var r=function(e,n){return Array.isArray(n)?new DataBind.Collection(e,n,t):n},a=function(t){var e=/^['"]([^'"]*)['"]$/;return e.exec(t)},i=function(t){for(var e=t.split("."),n=0;n<e.length;n++){var r=e[n].indexOf("][");if(r>=0){var a=e[n].substring(0,r+1),i=e[n].substring(r+1);e.splice(n,1),e.splice(n,0,a),e.splice(n+1,0,i)}}return e},c=function(t){var e=[],n=t,r=/[(][^)]*[)]/,a=r.exec(t);if(null!==a){n=t.substring(0,a.index);var i=a[0].replace("(","").replace(")",""),c=i.length>0?i.split(","):[];c.forEach(function(t){e.push(u(t.trim()))})}return{name:n,args:e,isMatch:null!==a}},o=function(t){var e=/\[([^\]]+)\]/;return e.exec(t)},l=function(t){var n=/^\d+$/;return n.test(t)?parseInt(t):e(t)},u=function(t,n,f){if(f=f||t,/^\d+$/.test(t))return parseInt(t);var s=a(t);if(null!==s)return s[1];var d=i(t),v=d.slice(1,d.length).join("."),h=c(d[0]);if(!h.isMatch){var g=o(d[0]);if(null!==g){var p=d[0].substring(0,g.index),y=l(g[1]);return void 0!==n?""===p?u(v,n[y],f):u(v,n[p][y],f):u(v,e(p)[y],f)}}if(void 0!==n)return""===d[0]?r(f,n):u(v,n[d[0]],f);if(1===d.length)return"function"==typeof e(h.name)?e(h.name).apply(this,h.args):r(t,e(t));var m="function"==typeof e(h.name)?e(h.name).apply(this,h.args):e(d[0]);return u(v,m,f)},f=function(r,a,c,u,d){u=u||r,d=d||[];var v=i(r),h=v.slice(1,v.length).join("."),g=o(v[0]);if(null!==g){var p=v[0].substring(0,g.index),y=l(g[1]);""!==p&&d.push(p),void 0!==c?""===p?1===v.length?(c[y]=a,t(u),s(d)):f(h,a,c[y],u,d):f(h,a,c[p][y],u,d):1===v.length?(e(p)[y]=a,t(u),s(d)):f(h,a,e(p)[y],u,d)}else void 0!==c?1===v.length?(c[v[0]]=a,t(u),s(d)):f(h,a,c[v[0]],u):1===v.length?(n(r,a),t(r)):(void 0===e(v[0])&&n(v[0],{}),f(h,a,e(v[0]),u))},s=function(e){e.forEach(function(e){t(e)})};return{get:u,attr:f}},t}(DataBind||{});