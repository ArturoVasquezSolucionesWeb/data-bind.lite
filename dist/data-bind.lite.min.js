var DataBind=function(t){"use strict";return t.Binder=function(t,e){function n(t){var e=c.querySelectorAll('[data-foreach$="in '+t+'"]');p(e,t),l(e);var n=c.querySelectorAll('[data-bind="'+t+'"]');S(n);var a=c.querySelectorAll('[data-class="'+t+'"]');u(a);var r=c.querySelectorAll('[data-class^="'+t+'("]');u(r)}function a(t,e){for(var n=[].slice.call(t),a=0;a<n.length;a++)for(var r=0;r<e.length;r++)n[a]===e[r]&&n.splice(a,1);return n}var r=e||window.document,c=r.querySelector("[data-scope="+t.scope+"]"),i={},o={};t.addValueChangedListener(n);var l=function(t){for(var e=0;e<t.length;e++){var n=t[e].querySelectorAll("[data-bind]");S(n);var a=t[e].querySelectorAll("[data-class]");u(a);var r=t[e].querySelectorAll("[data-click]");s(r);var i=c.querySelectorAll("[data-enter]");h(i)}},u=function(t){for(var e=0;e<t.length;e++)f(t[e])},f=function(e){var n=e.getAttribute("data-class"),a=i[n];a&&e.classList.remove(a);var r=t.get(n);i[n]=r,r&&e.classList.add(r)},d=function(){var t=c.querySelectorAll("[data-foreach]"),e=c.querySelectorAll("[data-foreach] [data-foreach]"),n=a(t,e);g(n),p(n);var r=c.querySelectorAll("[data-bind]");S(r);var i=c.querySelectorAll("[data-class]");u(i);var o=c.querySelectorAll("[data-click]");s(o);var l=c.querySelectorAll("[data-enter]");h(l)},h=function(t){for(var e=0;e<t.length;e++)v(t[e])},v=function(e){var n=e.getAttribute("data-enter");e.onkeydown=function(e){13===e.which&&t.get(n)}},s=function(t){for(var e=0;e<t.length;e++)m(t[e])},g=function(t){for(var e=0;e<t.length;e++){for(var n=[],a=0;a<t[e].children.length;a++)n.push(t[e].children[a].cloneNode(!0));var r=t[e].getAttribute("data-foreach"),c=r.split(" in ");o[r]={template:n,items:c[1].trim(),item:c[0].trim()}}},p=function(e){for(var n=0;n<e.length;n++){A(e[n]);for(var a=e[n].getAttribute("data-foreach"),r=o[a],c=t.get(r.items),i=0;i<c.length();i++)for(var l=0;l<r.template.length;l++){var u=r.template[l].cloneNode(!0);e[n].appendChild(u),y(u,"data-bind",r,i),y(u,"data-class",r,i),y(u,"data-click",r,i),y(u,"data-foreach",r,i)}}},A=function(t){for(;t.lastChild;)t.removeChild(t.lastChild)},y=function(t,e,n,a){var r=function(t){return t.replace(n.item,n.items+"["+a+"]")};if(t.hasAttribute(e)){var c=t.getAttribute(e),i=c.replace(new RegExp("^"+n.item+"(?=[.]|$)"),n.items+"["+a+"]").replace(new RegExp("[(,] *"+n.item+" *(?=[,)])","g"),r).replace(new RegExp(" in "+n.item+"$")," in "+n.items+"["+a+"]");t.setAttribute(e,i),"data-foreach"===e&&(g([t]),p([t]))}for(var o=0;o<t.children.length;o++)y(t.children[o],e,n,a)},m=function(e){var n=e.getAttribute("data-click");e.onclick=function(){t.get(n)}},S=function(t){for(var e=0;e<t.length;e++)b(t[e])},b=function(e){var n=e.getAttribute("data-bind"),a=t.get(n);void 0===a?t.attr(n,""):"checkbox"===e.type?(e.checked=a,e.onclick=function(){t.attr(n,e.checked)}):"radio"===e.type?(e.checked=a===e.value,e.onclick=function(){t.attr(n,e.value)}):"select"===e.tagName.toLowerCase()?(e.value=a,e.onchange=function(){t.attr(n,e.value)}):"text"===e.type||"textarea"===e.type?(e.value!==a&&(e.value=a),e.oninput=function(){t.attr(n,e.value)}):e.innerHTML=a};return{bind:d}},t}(DataBind||{}),DataBind=function(t){"use strict";return t.Model=function(t){function e(t){return r[t]}function n(t,e){r[t]=e}function a(t){i.forEach(function(e){e(t)}),c.hasOwnProperty(t)&&c[t].forEach(function(t){a(t)})}var r={},c={},i=[],o=new DataBind.Parser(a,e,n),l=function(t,e){o.attr(t,e)},u=function(t){return o.get(t)},f=function(t,e,n){n&&n.forEach(function(e){h(t,e)});for(var a=/this\.get\(['"]([^'"]+)['"]\)/g,c=a.exec(e.toString());null!=c;)h(t,c[1]),c=a.exec(e.toString());r[t]=e},d=function(t,e){r[t]=e},h=function(t,e){c[e]=c[e]||[],c[e].push(t)},v=function(t){i.push(t)};return{attr:l,get:u,computed:f,action:d,scope:t,addValueChangedListener:v,invoke:function(t){u(t)}}},t}(DataBind||{}),DataBind=function(t){"use strict";return t.Collection=function(t,e,n){var a=function(a){e.push(a),n(t)},r=function(){e.pop(),n(t)},c=function(a){e.forEach(function(t){a(t)}),n(t)},i=function(){e.length=0,n(t)};return{push:a,pop:r,value:e,length:function(){return e.length},forEach:c,clear:i}},t}(DataBind||{});