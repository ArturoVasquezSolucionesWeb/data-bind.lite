var DataBind=function(e){"use strict";return e.Binder=function(e,t){function n(e){var t=l.querySelectorAll('[data-foreach$="in '+e+'"]');v(t,e),i(t);var n=l.querySelectorAll('[data-bind="'+e+'"]');x(n);var a=l.querySelectorAll('[data-class="'+e+'"]');u(a);var r=l.querySelectorAll('[data-class^="'+e+'("]');u(r)}function a(e,t){for(var n=[].slice.call(e),a=0;a<n.length;a++)for(var r=0;r<t.length;r++)n[a]===t[r]&&n.splice(a,1);return n}var r=t||window.document,l=r.querySelector("[data-scope="+e.scope+"]"),c={},o={};e.addValueChangedListener(n);var i=function(e){for(var t=0;t<e.length;t++){var n=e[t].querySelectorAll("[data-bind]");x(n);var a=e[t].querySelectorAll("[data-class]");u(a);var r=e[t].querySelectorAll("[data-click]");h(r);var c=l.querySelectorAll("[data-enter]");f(c)}},u=function(e){for(var t=0;t<e.length;t++)d(e[t])},d=function(t){var n=t.getAttribute("data-class"),a=c[n];a&&t.classList.remove(a);var r=e.get(n);c[n]=r,r&&t.classList.add(r)},s=function(){var e=l.querySelectorAll("[data-foreach]"),t=l.querySelectorAll("[data-foreach] [data-foreach]"),n=a(e,t);g(n),v(n);var r=l.querySelectorAll("[data-bind]");x(r);var c=l.querySelectorAll("[data-class]");u(c);var o=l.querySelectorAll("[data-click]");h(o);var i=l.querySelectorAll("[data-enter]");f(i)},f=function(e){for(var t=0;t<e.length;t++)p(e[t])},p=function(t){var n=t.getAttribute("data-enter");t.onkeydown=function(t){13===t.which&&e.get(n)}},h=function(e){for(var t=0;t<e.length;t++)y(e[t])},g=function(e){for(var t=0;t<e.length;t++){for(var n=[],a=0;a<e[t].children.length;a++)n.push(e[t].children[a].cloneNode(!0));var r=e[t].getAttribute("data-foreach"),l=r.split(" in ");o[r]={template:n,items:l[1].trim(),item:l[0].trim()}}},v=function(t){for(var n=0;n<t.length;n++){m(t[n]);for(var a=t[n].getAttribute("data-foreach"),r=o[a],l=e.get(r.items),c=0;c<l.length();c++)for(var i=0;i<r.template.length;i++){var u=r.template[i].cloneNode(!0);t[n].appendChild(u),A(u,"data-bind",r,c),A(u,"data-class",r,c),A(u,"data-click",r,c),A(u,"data-foreach",r,c)}}},m=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},A=function(e,t,n,a){var r=function(e){return e.replace(n.item,n.items+"["+a+"]")};if(e.hasAttribute(t)){var l=e.getAttribute(t),c=l.replace(new RegExp("^"+n.item+"(?=[.]|$)"),n.items+"["+a+"]").replace(new RegExp("[(,] *"+n.item+" *(?=[,)])","g"),r).replace(new RegExp(" in "+n.item+"$")," in "+n.items+"["+a+"]");e.setAttribute(t,c),"data-foreach"===t&&(g([e]),v([e]))}for(var o=0;o<e.children.length;o++)A(e.children[o],t,n,a)},y=function(t){var n=t.getAttribute("data-click");t.onclick=function(){e.get(n)}},x=function(e){for(var t=0;t<e.length;t++)F(e[t])},F=function(t){var n=t.getAttribute("data-bind"),a=e.get(n);void 0===a?e.attr(n,""):"checkbox"===t.type?(t.checked=a,t.onclick=function(){e.attr(n,t.checked)}):"radio"===t.type?(t.checked=a===t.value,t.onclick=function(){e.attr(n,t.value)}):"select"===t.tagName.toLowerCase()?(t.value=a,t.onchange=function(){e.attr(n,t.value)}):"text"===t.type||"textarea"===t.type?(t.value!==a&&(t.value=a),t.oninput=function(){e.attr(n,t.value)}):t.innerHTML=a};return{bind:s}},e}(DataBind||{}),DataBind=function(e){"use strict";return e.Model=function(e){function t(e){return r[e]}function n(e,t){r[e]=t}function a(e){c.forEach(function(t){t(e)}),l.hasOwnProperty(e)&&l[e].forEach(function(e){a(e)})}var r={},l={},c=[],o=new DataBind.Parser(a,t,n),i=function(e,t){o.attr(e,t)},u=function(e){return o.get(e)},d=function(e,t,n){n&&n.forEach(function(t){f(e,t)});for(var a=/this\.get\(['"]([^'"]+)['"]\)/g,l=a.exec(t.toString());null!=l;)f(e,l[1]),l=a.exec(t.toString());r[e]=t},s=function(e,t){r[e]=t},f=function(e,t){l[t]=l[t]||[],l[t].push(e)},p=function(e){c.push(e)};return{attr:i,get:u,computed:d,action:s,scope:e,addValueChangedListener:p,invoke:function(e){u(e)}}},e}(DataBind||{}),DataBind=function(e){"use strict";return e.Collection=function(e,t,n){var a=function(a){t.push(a),n(e)},r=function(){t.pop(),n(e)},l=function(a){t.forEach(function(e){a(e)}),n(e)},c=function(){t.length=0,n(e)};return{push:a,pop:r,value:t,length:function(){return t.length},forEach:l,clear:c}},e}(DataBind||{}),DataBind=function(dataBind){"use strict";return dataBind.Parser=function(fireValueChangedForAllDependencies,lookupFunc,updateValueFunc){var checkWrapArray=function(e,t){return Array.isArray(t)?new DataBind.Collection(e,t,fireValueChangedForAllDependencies):t},checkForStringLiteral=function(e){var t=/^['"]([^'"]*)['"]$/;return t.exec(e)},tokenize=function(e){for(var t=e.split("."),n=0;n<t.length;n++){var a=t[n].indexOf("][");if(a>=0){var r=t[n].substring(0,a+1),l=t[n].substring(a+1);t.splice(n,1),t.splice(n,0,r),t.splice(n+1,0,l)}}return t},parseFunctionCall=function(e){var t=[],n=e,a=/[(][^)]*[)]/,r=a.exec(e);if(null!==r){n=e.substring(0,r.index);var l=r[0].replace("(","").replace(")",""),c=l.length>0?l.split(","):[];c.forEach(function(e){t.push(get(e.trim()))})}return{name:n,args:t,isMatch:null!==r}},getArrayIndexerMatch=function(e){var t=/\[([^\]]+)\]/;return t.exec(e)},getIndex=function(e){var t=/^\d+$/;return t.test(e)?parseInt(e):lookupFunc(e)},get=function(name,object,fullName){if(fullName=fullName||name,/^\d+$/.test(name))return parseInt(name);var stringLiteralMatch=checkForStringLiteral(name);if(null!==stringLiteralMatch)return stringLiteralMatch[1];var dotPieces=tokenize(name),rest=dotPieces.slice(1,dotPieces.length).join("."),parseFuncResult=parseFunctionCall(dotPieces[0]);if(!parseFuncResult.isMatch){var arrayIndexer=getArrayIndexerMatch(dotPieces[0]);if(null!==arrayIndexer){var prop=dotPieces[0].substring(0,arrayIndexer.index),index=getIndex(arrayIndexer[1]);return void 0!==object?""===prop?get(rest,object[index],fullName):get(rest,eval("object."+prop)[index],fullName):get(rest,lookupFunc(prop)[index],fullName)}}if(void 0!==object)return""===dotPieces[0]?checkWrapArray(fullName,object):get(rest,eval("object."+dotPieces[0]),fullName);if(1===dotPieces.length)return"function"==typeof lookupFunc(parseFuncResult.name)?lookupFunc(parseFuncResult.name).apply(this,parseFuncResult.args):checkWrapArray(name,lookupFunc(name));var thisObject="function"==typeof lookupFunc(parseFuncResult.name)?lookupFunc(parseFuncResult.name).apply(this,parseFuncResult.args):lookupFunc(dotPieces[0]);return get(rest,thisObject,fullName)},attr=function(name,value,object,fullName,changedCollections){fullName=fullName||name,changedCollections=changedCollections||[];var dotPieces=tokenize(name),rest=dotPieces.slice(1,dotPieces.length).join("."),arrayIndexer=getArrayIndexerMatch(dotPieces[0]);if(null!==arrayIndexer){var prop=dotPieces[0].substring(0,arrayIndexer.index),index=getIndex(arrayIndexer[1]);""!==prop&&changedCollections.push(prop),void 0!==object?""===prop?1===dotPieces.length?(object[index]=value,fireValueChangedForAllDependencies(fullName),fireValueChangedForAll(changedCollections)):attr(rest,value,object[index],fullName,changedCollections):attr(rest,value,eval("object."+prop)[index],fullName,changedCollections):1===dotPieces.length?(lookupFunc(prop)[index]=value,fireValueChangedForAllDependencies(fullName),fireValueChangedForAll(changedCollections)):attr(rest,value,lookupFunc(prop)[index],fullName,changedCollections)}else void 0!==object?1===dotPieces.length?(object[dotPieces[0]]=value,fireValueChangedForAllDependencies(fullName),fireValueChangedForAll(changedCollections)):attr(rest,value,eval("object."+dotPieces[0]),fullName):1===dotPieces.length?(updateValueFunc(name,value),fireValueChangedForAllDependencies(name)):(void 0===lookupFunc(dotPieces[0])&&updateValueFunc(dotPieces[0],{}),attr(rest,value,lookupFunc(dotPieces[0]),fullName))},fireValueChangedForAll=function(e){e.forEach(function(e){fireValueChangedForAllDependencies(e)})};return{get:get,attr:attr}},dataBind}(DataBind||{});