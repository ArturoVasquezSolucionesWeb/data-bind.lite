var DataBind=function(t){"use strict";return t.Binder=function(t,e){function n(t){var e=a.querySelectorAll('[data-foreach$="in '+t+'"]');T(e,t),i(e);var n=a.querySelectorAll('[data-bind="'+t+'"]');p(n);var r=a.querySelectorAll('[data-class="'+t+'"]');l(r);var o=a.querySelectorAll('[data-class^="'+t+'("]');l(o)}function r(t,e){for(var n=[].slice.call(t),r=0;r<n.length;r++)for(var o=0;o<e.length;o++)n[r]===e[o]&&n.splice(r,1);return n}var o=e||window.document,a=o.querySelector("[data-scope="+t.scope+"]"),c={},u={};t.addValueChangedListener(n);var i=function(t){for(var e=0;e<t.length;e++){var n=t[e].querySelectorAll("[data-bind]");p(n);var r=t[e].querySelectorAll("[data-class]");l(r);var o=t[e].querySelectorAll("[data-click]");k(o);var c=a.querySelectorAll("[data-enter]");d(c)}},l=function(t){for(var e=0;e<t.length;e++)f(t[e])},f=function(e){var n=e.getAttribute("data-class"),r=c[n];r&&e.classList.remove(r);var o=t.get(n);c[n]=o,o&&e.classList.add(o)},s=function(){var t=a.querySelectorAll("[data-foreach]"),e=a.querySelectorAll("[data-foreach] [data-foreach]"),n=r(t,e);v(n),T(n);var o=a.querySelectorAll("[data-bind]");p(o);var c=a.querySelectorAll("[data-class]");l(c);var u=a.querySelectorAll("[data-click]");k(u);var i=a.querySelectorAll("[data-enter]");d(i)},d=function(t){for(var e=0;e<t.length;e++)h(t[e])},h=function(e){var n=e.getAttribute("data-enter");e.onkeydown=function(e){13===e.which&&t.invoke(n)}},k=function(t){for(var e=0;e<t.length;e++)m(t[e])},v=function(t){for(var e=0;e<t.length;e++){for(var n=[],r=0;r<t[e].children.length;r++)n.push(t[e].children[r].cloneNode(!0));var o=t[e].getAttribute("data-foreach"),a=o.split(" in ");u[o]={template:n,items:a[1].trim(),item:a[0].trim()}}},T=function(e){for(var n=0;n<e.length;n++){g(e[n]);for(var r=e[n].getAttribute("data-foreach"),o=u[r],a=t.get(o.items),c=0;c<a.length();c++)for(var i=0;i<o.template.length;i++){var l=o.template[i].cloneNode(!0);e[n].appendChild(l),x(l,"data-bind",o,c),x(l,"data-class",o,c),x(l,"data-click",o,c),x(l,"data-foreach",o,c)}}},g=function(t){for(;t.lastChild;)t.removeChild(t.lastChild)},x=function(t,e,n,r){var o=function(t){return t.replace(n.item,n.items+"["+r+"]")};if(t.hasAttribute(e)){var a=t.getAttribute(e),c=a.replace(new RegExp("^"+n.item+"(?=[.]|$)"),n.items+"["+r+"]").replace(new RegExp("[(,] *"+n.item+" *(?=[,)])","g"),o).replace(new RegExp(" in "+n.item+"$")," in "+n.items+"["+r+"]");t.setAttribute(e,c),"data-foreach"===e&&(v([t]),T([t]))}for(var u=0;u<t.children.length;u++)x(t.children[u],e,n,r)},m=function(e){var n=e.getAttribute("data-click");e.onclick=function(){t.invoke(n)}},p=function(t){for(var e=0;e<t.length;e++)S(t[e])},S=function(e){var n=e.getAttribute("data-bind"),r=t.get(n);void 0===r?t.attr(n,""):"checkbox"===e.type?(e.checked=r,e.onclick=function(){t.attr(n,e.checked)}):"radio"===e.type?(e.checked=r===e.value,e.onclick=function(){t.attr(n,e.value)}):"select"===e.tagName.toLowerCase()?(e.value=r,e.onchange=function(){t.attr(n,e.value)}):"text"===e.type||"textarea"===e.type?(e.value!==r&&(e.value=r),e.oninput=function(){t.attr(n,e.value)}):e.innerHTML=r};return{bind:s}},t}(DataBind||{}),DataBind=function(t){"use strict";return t.Model=function(t){function e(t){return o[t]}function n(t,e){o[t]=e}function r(t){c.forEach(function(e){e(t)}),a.hasOwnProperty(t)&&a[t].forEach(function(t){r(t)})}var o={},a={},c=[],u=new DataBind.Parser(r,e,n),i=function(t,e){u.attr(t,e)},l=function(t){return u.get(t)},f=function(t,e,n){n&&n.forEach(function(e){d(t,e)});for(var r=/this\.get\(['"]([^'"]+)['"]\)/g,a=r.exec(e.toString());null!=a;)d(t,a[1]),a=r.exec(e.toString());o[t]=e},s=function(t,e){o[t]=e},d=function(t,e){a[e]=a[e]||[],a[e].push(t)},h=function(t){c.push(t)};return{attr:i,get:l,computed:f,action:s,scope:t,addValueChangedListener:h,invoke:function(t){l(t)}}},t}(DataBind||{}),DataBind=function(t){"use strict";return t.Collection=function(t,e,n){var r=function(r){e.push(r),n(t)},o=function(){e.pop(),n(t)},a=function(r){e.forEach(function(t){r(t)}),n(t)},c=function(r){var o=e.indexOf(r);return o>=0?(e.splice(o,1),n(t),!0):!1},u=function(){e.length=0,n(t)};return{push:r,pop:o,remove:c,value:e,length:function(){return e.length},forEach:a,clear:u}},t}(DataBind||{}),DataBind=function(t){"use strict";return t.Parser=function(t,e,n){var r=function(e,n){return Array.isArray(n)?new DataBind.Collection(e,n,t):n},o=function(t){var e=[];if("LPAREN"===t.currentToken().token){t.consume();for(var n="";"RPAREN"!==t.currentToken().token;)n+=t.currentToken().text,t.consume();n&&n.split(",").forEach(function(t){e.push(i(t))})}return e},a=function(t,n){var r=t.currentToken().text;t.consume();var a=o(t);return e(r).apply(n,a)},c=function(t,n,r){return t.consume(),r?r[e(n)[t.currentToken().text]]:e(n)[t.currentToken().text]},u=function(t,n){var o=t.currentToken().text;if(t.consume(),"DOT"===t.currentToken().token)return c(t,o,n);if("LBRACK"===t.currentToken().token){t.consume();var a=i(t.currentToken().text);return e(o)[a]}return r(o,e(o))},i=function(t){var n=new DataBind.Lexer(t),o=null;do{if("NUMBER"===n.currentToken().token)return parseInt(n.currentToken().text);if("LITERAL"===n.currentToken().token)return n.currentToken().text.slice(1,-1);"ID"===n.currentToken().token&&(o="function"==typeof e(n.currentToken().text)?a(n,this):u(n,o)),"DOT"===n.currentToken().token?(n.consume(),o=o[n.currentToken().text]):"LBRACK"===n.currentToken().token&&(n.consume(),o=o[i(n.currentToken().text)]),n.consume()}while(n.hasNextToken());return r(t,o)},l=function(r,o){var a=[],c=null,u=new DataBind.Lexer(r);do{var l;if("ID"===u.currentToken().token&&(l=u.currentToken().text,c||(c=e(l)),void 0===c&&(c={},n(l,c)),u.hasNextToken()||(n(l,o),t(l)),u.consume()),"LBRACK"===u.currentToken().token){a.push(l),u.consume();var s=i(u.currentToken().text);u.consume("RBRACK"),u.hasNextToken()?c=c[s]:(c[s]=o,t(r),f(a))}else"DOT"===u.currentToken().token&&(u.consume(),u.hasNextToken()?(c[u.currentToken().text]=c[u.currentToken().text]||{},c=c[u.currentToken().text]):(c[u.currentToken().text]=o,t(r),f(a)));u.consume()}while(u.hasNextToken())},f=function(e){e.forEach(function(e){t(e)})};return{get:i,attr:l}},t}(DataBind||{}),DataBind=function(t){"use strict";return t.Lexer=function(t){var e={root:[[/\[/,"LBRACK"],[/\]/,"RBRACK"],[/[(]/,"LPAREN"],[/[)]/,"RPAREN"],[/,/,"COMMA"],[/['][^']*[']/,"LITERAL"],[/["][^"]*["]/,"LITERAL"],[/[a-zA-Z][a-zA-Z0-9]*/,"ID"],[/[0-9]+/,"NUMBER"],[/[.]/,"DOT"],[/\s+/,TokenJS.Ignore]]},n=new TokenJS.Lexer(t,e,!1),r=n.tokenize(),o=0,a=function(){return o<r.length-1},c=function(){return o<r.length?r[o]:TokenJS.EndOfStream},u=function(t){if(o++,t&&c().token!==t)throw{toString:function(){return"Syntax error: Expected token: "+t+", actual: "+c().token}}};return{currentToken:c,consume:u,hasNextToken:a}},t}(DataBind||{}),TokenJS=TokenJS||{};TokenJS.Ignore={toString:function(){return"Ignored rule"}},TokenJS.EndOfStream={toString:function(){return"End of token stream"}},TokenJS.SyntaxError=function(t){this.name="SyntaxError",this.message=t},TokenJS.StateError=function(t){this.name="StateError",this.message=t},TokenJS.Lexer=function(t,e,n){var r,o=e,a=t,c=0,u=n,i=function(t){if(!o.hasOwnProperty(t))throw new TokenJS.StateError("Missing state: '"+t+"'.");r=t};i("root");var l=function(){if(c>=a.length)return TokenJS.EndOfStream;for(var t=r,e=f(),n=0;n<e.length;n++){var o=e[n];if("function"!=typeof o.value)return k(o.matchText),o.value===TokenJS.Ignore?l():{text:o.matchText,token:o.value,index:o.index};var i=o.value.call(x,o.matchText);if(i===TokenJS.Ignore)return k(o.matchText),l();if(g(i))return k(o.matchText),{text:o.matchText,token:i,index:o.index};d(t)&&h()}return u?(c+=1,l()):void h()},f=function(){for(var t=[],e=o[r],n=0;n<e.length;n++){var u=e[n][0],i=u.exec(a.substring(c));i&&0===i.index&&t.push({matchText:i[0],value:e[n][1],index:c})}return s(t),t},s=function(t){t.sort(function(t,e){return t.matchText.length<e.matchText.length?1:t.matchText.length>e.matchText.length?-1:0})},d=function(t){return r!==t},h=function(){throw new TokenJS.SyntaxError("Invalid character '"+a[c]+"' at index "+(c+1))},k=function(t){c+=t.length},v=function(){c=0,r="root"},T=function(){v();for(var t=[],e=l();e!==TokenJS.EndOfStream;)t.push(e),e=l();return t},g=function(t){return"undefined"!=typeof t&&null!==t},x={state:i};return{getNextToken:l,tokenize:T,state:i,reset:v}};