var DataBind=function(t){"use strict";return t.Binder=function(t,e){function a(t){var e=c.querySelectorAll('[data-foreach$="in '+t+'"]');p(e,t),l(e);var a=c.querySelectorAll('[data-bind="'+t+'"]');S(a);var n=c.querySelectorAll('[data-class="'+t+'"]');u(n);var r=c.querySelectorAll('[data-class^="'+t+'("]');u(r)}function n(t,e){for(var a=[].slice.call(t),n=0;n<a.length;n++)for(var r=0;r<e.length;r++)a[n]===e[r]&&a.splice(n,1);return a}var r=e||window.document,c=r.querySelector("[data-scope="+t.scope+"]"),i={},o={};t.addValueChangedListener(a);var l=function(t){for(var e=0;e<t.length;e++){var a=t[e].querySelectorAll("[data-bind]");S(a);var n=t[e].querySelectorAll("[data-class]");u(n);var r=t[e].querySelectorAll("[data-click]");s(r);var i=c.querySelectorAll("[data-enter]");h(i)}},u=function(t){for(var e=0;e<t.length;e++)f(t[e])},f=function(e){var a=e.getAttribute("data-class"),n=i[a];n&&e.classList.remove(n);var r=t.get(a);i[a]=r,r&&e.classList.add(r)},d=function(){var t=c.querySelectorAll("[data-foreach]"),e=c.querySelectorAll("[data-foreach] [data-foreach]"),a=n(t,e);g(a),p(a);var r=c.querySelectorAll("[data-bind]");S(r);var i=c.querySelectorAll("[data-class]");u(i);var o=c.querySelectorAll("[data-click]");s(o);var l=c.querySelectorAll("[data-enter]");h(l)},h=function(t){for(var e=0;e<t.length;e++)v(t[e])},v=function(e){var a=e.getAttribute("data-enter");e.onkeydown=function(e){13===e.which&&t.get(a)}},s=function(t){for(var e=0;e<t.length;e++)m(t[e])},g=function(t){for(var e=0;e<t.length;e++){for(var a=[],n=0;n<t[e].children.length;n++)a.push(t[e].children[n].cloneNode(!0));var r=t[e].getAttribute("data-foreach"),c=r.split(" in ");o[r]={template:a,items:c[1].trim(),item:c[0].trim()}}},p=function(e){for(var a=0;a<e.length;a++){A(e[a]);for(var n=e[a].getAttribute("data-foreach"),r=o[n],c=t.get(r.items),i=0;i<c.length();i++)for(var l=0;l<r.template.length;l++){var u=r.template[l].cloneNode(!0);e[a].appendChild(u),y(u,"data-bind",r,i),y(u,"data-class",r,i),y(u,"data-click",r,i),y(u,"data-foreach",r,i)}}},A=function(t){for(;t.lastChild;)t.removeChild(t.lastChild)},y=function(t,e,a,n){var r=function(t){return t.replace(a.item,a.items+"["+n+"]")};if(t.hasAttribute(e)){var c=t.getAttribute(e),i=c.replace(new RegExp("^"+a.item+"(?=[.]|$)"),a.items+"["+n+"]").replace(new RegExp("[(,] *"+a.item+" *(?=[,)])","g"),r).replace(new RegExp(" in "+a.item+"$")," in "+a.items+"["+n+"]");t.setAttribute(e,i),"data-foreach"===e&&(g([t]),p([t]))}for(var o=0;o<t.children.length;o++)y(t.children[o],e,a,n)},m=function(e){var a=e.getAttribute("data-click");e.onclick=function(){t.get(a)}},S=function(t){for(var e=0;e<t.length;e++)b(t[e])},b=function(e){var a=e.getAttribute("data-bind"),n=t.get(a);void 0===n?t.attr(a,""):"checkbox"===e.type?(e.checked=n,e.onclick=function(){t.attr(a,e.checked)}):"radio"===e.type?(e.checked=n===e.value,e.onclick=function(){t.attr(a,e.value)}):"select"===e.tagName.toLowerCase()?(e.value=n,e.onchange=function(){t.attr(a,e.value)}):"text"===e.type||"textarea"===e.type?(e.value!==n&&(e.value=n),e.oninput=function(){t.attr(a,e.value)}):e.innerHTML=n};return{bind:d}},t}(DataBind||{}),DataBind=function(t){"use strict";return t.Model=function(t){var e={},a={},n=[],r=function(t,a){var n=new DataBind.Parser(e,i,this);n.attr(t,a)},c=function(t){var a=new DataBind.Parser(e,i,this);return a.get(t)},i=function(t){n.forEach(function(e){e(t)}),a.hasOwnProperty(t)&&a[t].forEach(function(t){i(t)})},o=function(t,a,n){n&&n.forEach(function(e){u(t,e)});for(var r=/this\.get\(['"]([^'"]+)['"]\)/g,c=r.exec(a.toString());null!=c;)u(t,c[1]),c=r.exec(a.toString());e[t]=a},l=function(t,a){e[t]=a},u=function(t,e){a[e]=a[e]||[],a[e].push(t)},f=function(t){n.push(t)};return{attr:r,get:c,computed:o,action:l,scope:t,addValueChangedListener:f,invoke:function(t){c(t)}}},t}(DataBind||{}),DataBind=function(t){"use strict";return t.Collection=function(t,e,a){var n=function(n){e.push(n),a(t)},r=function(){e.pop(),a(t)},c=function(n){e.forEach(function(t){n(t)}),a(t)},i=function(){e.length=0,a(t)};return{push:n,pop:r,value:e,length:function(){return e.length},forEach:c,clear:i}},t}(DataBind||{});